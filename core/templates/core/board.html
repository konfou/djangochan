{% extends 'base.html' %}
{% block header %}
    <title>Djangochan > /{{ board.ln }}/</title>
{% endblock header %}
{% block content %}
    <div id="board">
        [<a href="{% url 'index' %}">Index</a>]
        <h2 class="board-header">/{{ board.ln }}/ - {{ board.name }}</h2>
        {% if board.description %}
            <p>{{ board.decription }}</p>
        {% endif %}
        <form id="newthreadform" method="post">{% csrf_token %}
            <strong>[New Thread]</strong>
            {{form.as_table }}
            <!-- <input type="submit" value="Submit"> -->
            <br>
            [<a href="#" onclick="document.getElementById('newthreadform').submit(); return false;">Submit</a>]
        </form>
    </div>
    <div class="threads-section" id="threads">
        <h3 ckass="threads-header">Threads</h3>
        {% for thread, replies in posts.items %}
                <div class="row">
                    <p><strong>{{ thread.author }}</strong> posted at {{ thread.timestamp }} #{{ thread.pk }}</p>
                    <p>{{ thread.text | safe }}</p>
                    <p>[Replies: {{ thread.post_set.all | length | add:1 }}] [<a href="{% url 'thread' board.ln thread.pk %}">Visit</a>]</p>
                </div>
                {% for post in replies %}
                    <div class="row">
                        <div class="one-third column"></div>
                        <div class="two-third column">
                            <p><strong>{{ post.author }}</strong> posted at {{ post.timestamp }} #{{ post.pk }}</p>
                            <p>{{ post.text | safe }}</p>
                        </div>
                    </div>
                {% endfor %}
        {% empty %}
                <p>No threads yet.</p>
        {% endfor %}
    </div>
{% endblock content %}
